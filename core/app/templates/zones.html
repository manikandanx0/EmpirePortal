{% extends 'base.html' %}
{% block title %}Zones | üëë Tech Empire Quest{% endblock %}

{% block content %}
<section class="max-w-6xl mx-auto space-y-10">

  <!-- Header -->
  <div class="text-center">
    <h2 class="mono text-2xl tracking-widest text-[var(--neon-purple)]">
      // Zones
    </h2>
    <p class="mono text-sm text-[var(--text-muted)] tracking-wider mt-2">
      Select an operational zone to deploy your squad
    </p>
  </div>

  <!-- Zones Grid -->
  <ul class="grid md:grid-cols-2 gap-8">

    {% for zone in zones %}
      <li
        role="article"
        aria-labelledby="zone-title-{{ zone.id }}"
        class="panel card hud flex flex-col justify-between"
      >

        <!-- Zone Info -->
        <div class="space-y-3">
          <h3
            id="zone-title-{{ zone.id }}"
            class="text-xl tracking-widest text-[var(--neon-cyan)]"
          >
            {{ zone.title }}
          </h3>

          <div class="text-sm text-[var(--text-muted)] leading-relaxed">
            {{ zone.description|safe }}
          </div>
        </div>

        <!-- Zone Action -->
        <div class="mt-6 flex items-center justify-between gap-4">

          <div class="mono text-xs tracking-widest text-[var(--text-muted)]">
            {% if zone.score %}
              SCORE: <span class="text-[var(--text-main)]">{{ zone.score }}</span>
            {% else %}
              SCORE: <span class="text-[var(--text-muted)]">‚Äî</span>
            {% endif %}
          </div>

          <div class="flex items-center gap-3">

            {% if zone.has_completed %}
              {% if zone.can_enter %}
                <!-- COMPLETED BUT RE-ENTERABLE -->
                <a
                  href="{% url 'enter_zone' %}"
                  aria-label="Re-enter {{ zone.title }}"
                  class="btn mono"
                >
                  Re-Enter
                </a>
              {% else %}
                <!-- COMPLETED & LOCKED -->
                <span
                  class="mono text-xs px-3 py-1 rounded-full border border-white/20 text-[var(--text-muted)]"
                >
                  Completed
                </span>
              {% endif %}

            {% elif zone.has_active %}
              <!-- ACTIVE -->
              <a
                href="{% url 'enter_zone' %}"
                aria-label="Continue {{ zone.title }}"
                class="btn mono"
              >
                Continue
              </a>

            {% else %}
              {% if zone.can_enter %}
                <!-- NEVER ATTEMPTED BUT ACCESS EXISTS -->
                <a
                  href="{% url 'enter_zone' %}"
                  aria-label="Enter {{ zone.title }}"
                  class="btn mono"
                >
                  Enter Zone
                </a>
              {% else %}
                <!-- LOCKED -->
                <span
                  class="mono text-xs px-3 py-1 rounded-full border border-[var(--neon-pink)] text-[var(--neon-pink)]"
                >
                  üîí Locked
                </span>
              {% endif %}
            {% endif %}

          </div>
        </div>

      </li>
    {% endfor %}

  </ul>

  <!-- Footer Nav -->
  <div class="text-center pt-6">
    <a
      href="{% url 'index' %}"
      class="mono text-sm tracking-widest text-[var(--neon-cyan)] hover:underline"
    >
      ‚Üê Return to Base
    </a>
  </div>

</section>
{% endblock %}
